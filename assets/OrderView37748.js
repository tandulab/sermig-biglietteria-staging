import{l as Ue,m as Pe,o as oe,p as C,a as ne,c as M,_ as le,r as V,q as ge,b as d,e as y,g as n,f as a,n as W,t as k,w,s as Qe,h as z,v as pe,x as P,F as re,B as Xe,C as ye,Z as Ne,D as me,y as St,O as Dt,z as Ot,A as Vt,E as At,G as ee,T as Lt,H as fe,I as Ve,J as qe,K as He,L as Tt,M as Pt,i as ie,N as Ae,d as Fe,P as jt,Q as Ze,R as Ye,S as et,U as tt}from"../index37748.js";import{u as ce,a as ke,f as ot,b as Ie,c as Mt,d as Nt,e as Le,g as Te,D as se,h as nt,i as Ke}from"./newOrder-dialog37748.js";import{u as he,s as te,e as q,p as lt,a as Ut,b as Ee,c as at,d as Et}from"./helpers37748.js";import{F as Ft}from"./vee-validate.esm37748.js";class Je{static async fetchAll(e){const l=e.location_permalink;return delete e.location_permalink,(await Ue(`/ticket_office/${l}/search/tickets`,e)).data}static async fetchAllOpenTickets(e){const l=e.location_permalink;return delete e.location_permalink,(await Ue(`/ticket_office/${l}/orders/search_codes`,e)).data}}const je=Pe({id:"ticket",state:()=>({ticket:{},tickets:[],response_tickets:{},open_tickets_codes:{}}),getters:{allTickets:o=>o.response_tickets.available_ticket_types,allOpenTickets:o=>o.open_tickets_codes.open_tickets,responseTickets:o=>o.response_tickets,getTotalTickets:o=>o.response_tickets?o.response_tickets.total:0,getCurrentTicket:o=>o.ticket},actions:{async fetchAllTickets(o){await Je.fetchAll(o).then(e=>this.response_tickets=e)},async fetchAllOpenTickets(o){await Je.fetchAllOpenTickets(o).then(e=>this.open_tickets_codes=e)}}}),It={computed:{Code(){return Code}},props:["location_permalink","time_slot"],setup(o,e){oe(()=>{l.value=Object.assign({},o.time_slot)});const l=C({}),t=je(),i=ce(),{showLoader:u,hideLoader:s}=he(),m=ne(),S=C(),_=C(),c=M(()=>t.allOpenTickets),g=M(()=>i.paymentStatus),b=M(()=>i.paymentModeList),L=M(()=>{const D=i.getPaymentMethods;return Object.entries(D).map(([U,B])=>({id:U,label:B}))}),f=M(()=>i.getCurrentOrder),r=async function(D){const U={code:D.query.toUpperCase(),location_permalink:o.location_permalink};await t.fetchAllOpenTickets(U)},E=async function(){var U,B;const D={id:o.location_permalink,order_id:l.value.id,status:(U=l.value)==null?void 0:U.status,payment_method:l.value.payment_method,open_ticket_codes:[],api_version:"v2",notes:(B=l.value)==null?void 0:B.notes};if(l.value.status&&l.value.status=="payed"&&!l.value.payment_method){S.value="Seleziona un metodo di pagamento";return}for(const K of l.value.open_tickets_used)if(K.expired){_.value="Uno o più codici biglietto risultano scaduti";return}if(l.value.open_tickets_used&&l.value.open_tickets_used.length>0){let K=[];l.value.open_tickets_used.forEach(F=>{K.push(F.code)}),D.open_ticket_codes=K}v(D)},v=async function(D){u(),await i.updateOrder(D).then(()=>{s(),te(m,{message:"Stato aggiornato correttamente",error:!1}),e.emit("closeDialog",f.value)}).catch(U=>{s(),q(m,U)})};return{form:l,open_tickets:c,paymentList:g,paymentModeList:b,changeStatus:E,errorMessage:S,errorMessageVoucher:_,dynamicPaymentMethods:L,fetchAllOpenTickets:r,onChangeStatus:function(){(l.value.status=="free"||l.value.status=="to_pay")&&(l.value.payment_method=null)}}}},Bt={key:0,class:"formgrid grid flex-column mt-3"},$t={class:"field col-12"},zt=n("label",{for:"status"},"Stato pagamento",-1),Rt={class:"field col-12"},qt=n("label",{for:"payment_method"},"Modalità pagamento",-1),Ht={class:"p-error",id:"dd-error"},Kt={key:0,class:"field col-12 flex flex-column"},Jt=n("label",{for:"user_zip"},"Codice biglietto",-1),Gt={key:0,class:"pi pi-exclamation-triangle",style:{color:"#ff6767"}},Wt={class:"p-error",id:"dd-error"},Qt={class:"flex align-items-center justify-content-end mt-3"};function Xt(o,e,l,t,i,u){const s=V("Dropdown"),m=V("AutoComplete"),S=V("Button"),_=ge("tooltip");return d(),y(re,null,[t.form?(d(),y("div",Bt,[n("div",$t,[zt,a(s,{modelValue:t.form.status,"onUpdate:modelValue":e[0]||(e[0]=c=>t.form.status=c),options:t.paymentList,optionLabel:"name",optionValue:"id",class:"w-full",onChange:e[1]||(e[1]=c=>t.onChangeStatus())},null,8,["modelValue","options"])]),n("div",Rt,[qt,a(s,{modelValue:t.form.payment_method,"onUpdate:modelValue":e[2]||(e[2]=c=>t.form.payment_method=c),options:t.dynamicPaymentMethods,optionLabel:"label",optionValue:"id",class:W(["w-full",{"p-invalid":t.errorMessage}]),disabled:t.form.status!="payed",onChange:e[3]||(e[3]=c=>t.errorMessage=null)},null,8,["modelValue","options","disabled","class"]),n("small",Ht,k(t.errorMessage||" "),1)]),t.form.payment_method=="voucher"&&t.form.status=="payed"?(d(),y("div",Kt,[Jt,a(m,{modelValue:t.form.open_tickets_used,"onUpdate:modelValue":e[4]||(e[4]=c=>t.form.open_tickets_used=c),suggestions:t.open_tickets,class:W(["uppercase w-full",{"p-invalid":t.errorMessageVoucher}]),onComplete:e[5]||(e[5]=c=>t.fetchAllOpenTickets(c)),emptySearchMessage:"Nessun risultato",emptySelectionMessage:"Nessun risultato",optionLabel:"code",optionValue:"code",multiple:"",onChange:e[6]||(e[6]=c=>t.errorMessageVoucher=null)},{option:w(({option:c})=>[n("span",{class:"flex flex-row justify-content-between",style:Qe({color:c.expired?"#ff6767":null})},[z(k(c.code)+" ",1),c.expired?pe((d(),y("i",Gt,null,512)),[[_,"Scaduto"]]):P("",!0)],4)]),_:1},8,["modelValue","suggestions","class"]),n("small",Wt,k(t.errorMessageVoucher||" "),1)])):P("",!0)])):P("",!0),n("div",Qt,[a(S,{label:"Annulla",text:"",onClick:e[7]||(e[7]=c=>o.$emit("closeDialog",null))}),a(S,{label:"Conferma",onClick:e[8]||(e[8]=c=>t.changeStatus())})])],64)}const Zt=le(It,[["render",Xt]]);var Yt=`
@layer primevue {
    .p-confirm-popup {
        position: absolute;
        margin-top: 10px;
        top: 0;
        left: 0;
    }

    .p-confirm-popup-flipped {
        margin-top: 0;
        margin-bottom: 10px;
    }

    /* Animation */
    .p-confirm-popup-enter-from {
        opacity: 0;
        transform: scaleY(0.8);
    }

    .p-confirm-popup-leave-to {
        opacity: 0;
    }

    .p-confirm-popup-enter-active {
        transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1), opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
    }

    .p-confirm-popup-leave-active {
        transition: opacity 0.1s linear;
    }

    .p-confirm-popup:after,
    .p-confirm-popup:before {
        bottom: 100%;
        left: calc(var(--overlayArrowLeft, 0) + 1.25rem);
        content: ' ';
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
    }

    .p-confirm-popup:after {
        border-width: 8px;
        margin-left: -8px;
    }

    .p-confirm-popup:before {
        border-width: 10px;
        margin-left: -10px;
    }

    .p-confirm-popup-flipped:after,
    .p-confirm-popup-flipped:before {
        bottom: auto;
        top: 100%;
    }

    .p-confirm-popup.p-confirm-popup-flipped:after {
        border-bottom-color: transparent;
    }

    .p-confirm-popup.p-confirm-popup-flipped:before {
        border-bottom-color: transparent;
    }

    .p-confirm-popup .p-confirm-popup-content {
        display: flex;
        align-items: center;
    }
}
`,eo={root:function(e){var l=e.instance;return["p-confirm-popup p-component",{"p-input-filled":l.$primevue.config.inputStyle==="filled","p-ripple-disabled":l.$primevue.config.ripple===!1}]},content:"p-confirm-popup-content",icon:function(e){var l=e.instance;return["p-confirm-popup-icon",l.confirmation?l.confirmation.icon:null]},message:"p-confirm-popup-message",footer:"p-confirm-popup-footer",rejectButton:function(e){var l=e.instance;return["p-confirm-popup-reject",l.confirmation&&!l.confirmation.rejectClass?"p-button-text":null]},acceptButton:"p-confirm-popup-accept"},to=Xe.extend({name:"confirmpopup",css:Yt,classes:eo}),oo={name:"BaseConfirmPopup",extends:Tt,props:{group:String},style:to,provide:function(){return{$parentInstance:this}}},st={name:"ConfirmPopup",extends:oo,inheritAttrs:!1,data:function(){return{visible:!1,confirmation:null,autoFocusAccept:null,autoFocusReject:null}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,confirmListener:null,closeListener:null,mounted:function(){var e=this;this.confirmListener=function(l){l&&l.group===e.group&&(e.confirmation=l,e.target=l.target,e.confirmation.onShow&&e.confirmation.onShow(),e.visible=!0)},this.closeListener=function(){e.visible=!1,e.confirmation=null},ye.on("confirm",this.confirmListener),ye.on("close",this.closeListener)},beforeUnmount:function(){ye.off("confirm",this.confirmListener),ye.off("close",this.closeListener),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindResizeListener(),this.container&&(Ne.clear(this.container),this.container=null),this.target=null,this.confirmation=null},methods:{accept:function(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject:function(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onHide:function(){this.confirmation.onHide&&this.confirmation.onHide(),this.visible=!1},onAcceptKeydown:function(e){(e.code==="Space"||e.code==="Enter")&&(this.accept(),me.focus(this.target),e.preventDefault())},onRejectKeydown:function(e){(e.code==="Space"||e.code==="Enter")&&(this.reject(),me.focus(this.target),e.preventDefault())},onEnter:function(e){this.autoFocusAccept=this.confirmation.defaultFocus===void 0||this.confirmation.defaultFocus==="accept",this.autoFocusReject=this.confirmation.defaultFocus==="reject",this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),Ne.set("overlay",e,this.$primevue.config.zIndex.overlay)},onAfterEnter:function(){this.focus()},onLeave:function(){this.autoFocusAccept=null,this.autoFocusReject=null,this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener()},onAfterLeave:function(e){Ne.clear(e)},alignOverlay:function(){me.absolutePosition(this.container,this.target);var e=me.getOffset(this.container),l=me.getOffset(this.target),t=0;e.left<l.left&&(t=l.left-e.left),this.container.style.setProperty("--overlayArrowLeft","".concat(t,"px")),e.top<l.top&&(this.container.setAttribute("data-p-confirm-popup-flipped","true"),!this.isUnstyled&&me.addClass(this.container,"p-confirm-popup-flipped"))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(l){e.visible&&e.container&&!e.container.contains(l.target)&&!e.isTargetClicked(l)?(e.confirmation.onHide&&e.confirmation.onHide(),e.visible=!1):e.alignOverlay()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new St(this.target,function(){e.visible&&(e.visible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.visible&&!me.isTouchDevice()&&(e.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},focus:function(){var e=this.container.querySelector("[autofocus]");e&&e.focus({preventScroll:!0})},isTargetClicked:function(e){return this.target&&(this.target===e.target||this.target.contains(e.target))},containerRef:function(e){this.container=e},onOverlayClick:function(e){Dt.emit("overlay-click",{originalEvent:e,target:this.target})},onOverlayKeydown:function(e){e.code==="Escape"&&(ye.emit("close",this.closeListener),me.focus(this.target))},getCXOptions:function(e,l){return{contenxt:{icon:e,iconClass:l.class}}}},computed:{message:function(){return this.confirmation?this.confirmation.message:null},acceptLabel:function(){return this.confirmation?this.confirmation.acceptLabel||this.$primevue.config.locale.accept:null},rejectLabel:function(){return this.confirmation?this.confirmation.rejectLabel||this.$primevue.config.locale.reject:null},acceptIcon:function(){return this.confirmation?this.confirmation.acceptIcon:null},rejectIcon:function(){return this.confirmation?this.confirmation.rejectIcon:null}},components:{CPButton:Ot,Portal:Vt},directives:{focustrap:At}};function be(o){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(o)}function Ge(o,e){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);e&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),l.push.apply(l,t)}return l}function We(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?arguments[e]:{};e%2?Ge(Object(l),!0).forEach(function(t){no(o,t,l[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):Ge(Object(l)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(l,t))})}return o}function no(o,e,l){return e=lo(e),e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}function lo(o){var e=ao(o,"string");return be(e)==="symbol"?e:String(e)}function ao(o,e){if(be(o)!=="object"||o===null)return o;var l=o[Symbol.toPrimitive];if(l!==void 0){var t=l.call(o,e||"default");if(be(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}var so=["aria-modal"];function io(o,e,l,t,i,u){var s=V("CPButton"),m=V("Portal"),S=ge("focustrap");return d(),ee(m,null,{default:w(function(){return[a(Lt,fe({name:"p-confirm-popup",onEnter:u.onEnter,onAfterEnter:u.onAfterEnter,onLeave:u.onLeave,onAfterLeave:u.onAfterLeave},o.ptm("transition")),{default:w(function(){return[i.visible?pe((d(),y("div",fe({key:0,ref:u.containerRef,role:"alertdialog",class:o.cx("root"),"aria-modal":i.visible,onClick:e[2]||(e[2]=function(){return u.onOverlayClick&&u.onOverlayClick.apply(u,arguments)}),onKeydown:e[3]||(e[3]=function(){return u.onOverlayKeydown&&u.onOverlayKeydown.apply(u,arguments)})},We(We({},o.$attrs),o.ptm("root"))),[o.$slots.container?Ve(o.$slots,"container",{key:0,message:i.confirmation,onAccept:u.accept,onReject:u.reject}):(d(),y(re,{key:1},[o.$slots.message?(d(),ee(qe(o.$slots.message),{key:1,message:i.confirmation},null,8,["message"])):(d(),y("div",fe({key:0,class:o.cx("content")},o.ptm("content")),[Ve(o.$slots,"icon",{},function(){return[o.$slots.icon?(d(),ee(qe(o.$slots.icon),{key:0,class:W(o.cx("icon"))},null,8,["class"])):i.confirmation.icon?(d(),y("span",fe({key:1,class:o.cx("icon")},o.ptm("icon")),null,16)):P("",!0)]}),n("span",fe({class:o.cx("message")},o.ptm("message")),k(i.confirmation.message),17)],16)),n("div",fe({class:o.cx("footer")},o.ptm("footer")),[a(s,{label:u.rejectLabel,onClick:e[0]||(e[0]=function(_){return u.reject()}),onKeydown:u.onRejectKeydown,autofocus:i.autoFocusReject,class:W([o.cx("rejectButton"),i.confirmation.rejectClass]),unstyled:o.unstyled,pt:o.ptm("rejectButton"),"data-pc-name":"rejectbutton"},He({_:2},[u.rejectIcon||o.$slots.rejecticon?{name:"icon",fn:w(function(_){return[Ve(o.$slots,"rejecticon",{},function(){return[n("span",fe({class:[u.rejectIcon,_.class]},o.ptm("rejectButton").icon,{"data-pc-name":"rejectbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1032,["label","onKeydown","autofocus","class","unstyled","pt"]),a(s,{label:u.acceptLabel,onClick:e[1]||(e[1]=function(_){return u.accept()}),onKeydown:u.onAcceptKeydown,autofocus:i.autoFocusAccept,class:W([o.cx("acceptButton"),i.confirmation.acceptClass]),unstyled:o.unstyled,pt:o.ptm("acceptButton"),"data-pc-name":"acceptbutton"},He({_:2},[u.acceptIcon||o.$slots.accepticon?{name:"icon",fn:w(function(_){return[Ve(o.$slots,"accepticon",{},function(){return[n("span",fe({class:[u.acceptIcon,_.class]},o.ptm("acceptButton").icon,{"data-pc-name":"acceptbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1032,["label","onKeydown","autofocus","class","unstyled","pt"])],16)],64))],16,so)),[[S]]):P("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3})}st.render=io;const ro={props:["order"],setup(o,{emit:e}){oe(()=>{U.value&&D.value&&U.value.forEach(I=>{I.permalink===D.value&&(s.value=I.name)})});const l=C(0),t=C([]),i=C(!1),u=C(!0),s=C(),m=Pt(),S=C([]),_=C({}),c=C(null),g=C(!1),b=C({...o.order});ie(()=>o.order,I=>{Object.assign(b,I)});const L=je(),f=ce(),r=ne(),E=ke(),v=M(()=>L.allTickets),h=M(()=>f.getCurrentOrder),D=M(()=>E.getCurrentLocation),U=M(()=>E.allLocations),B=M(()=>{const I=o.order.payment_method,R=f.getPaymentMethods;return I?R[I]:"-"}),K=M(()=>{const I=f.getPaymentMethods;return Object.entries(I).map(([R,G])=>({id:R,label:G}))}),F=M(()=>f.paymentMethodAccountList),H=[{label:"Acconto",value:"deposit"},{label:"Saldo",value:"balance"}],A=I=>I==="deposit"?"Acconto":I==="balance"?"Saldo":"-",$=(I,R)=>{c.value=I,m.require({target:R.currentTarget,message:"Sei sicuro di voler eliminare questo acconto?",icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:"Annulla",acceptLabel:"Elimina",accept:async()=>{var G;await f.deletePayment({location:((G=D.value)==null?void 0:G.permalink)??"",id:o.order.id,payment_id:c.value.id}),await ue(),te(r,{message:"Acconto eliminato con successo",error:!1})}})},X=function(){let I={amount:"",payment_method:"",typology:"",id:"-1"};b.value.payments.push(I),S.value.push(I)},ae=async function(I){var R,G;g.value=!0;try{let{newData:de}=I;const we={amount:de.amount,payment_method:de.payment_method,typology:de.typology,paid_at:Le(de.paid_at)};de.id!=-1?await f.updatePayment({location:((R=D.value)==null?void 0:R.permalink)??"",id:o.order.id,payment_id:de.id,payment:we}):await f.createPayment({location:((G=D.value)==null?void 0:G.permalink)??"",id:o.order.id,payment:we}),await ue()}catch(de){q(r,de)}finally{g.value=!1}},_e=function(I,R){_.value.payments.splice(R,1)},ue=async function(){var I;try{const R=await f.getPayment({location:((I=D.value)==null?void 0:I.permalink)??"",id:o.order.id});b.value.payments.splice(0,b.value.payments.length,...R.payments),b.value.paid_amount=R.paid_amount,b.value.remaining_amount=R.remaining_amount}catch{b.value.remaining_amount="0.0",b.value.paid_amount="0.0",b.value.payments=[]}};return{tickets:v,active:l,partialTotals:t,showOrderDetail:i,currentOrder:h,showSecondTab:u,currentLocation:D,selectedLocation:s,editingRows:S,localOrder:b,loadingPayments:g,formatExplicitDate:ot,formatDate:Ie,confirm1:$,addAmount:X,onRowEditSave:ae,deleteSlot:_e,dynamicPaymentMethods:K,typologyOptions:H,getPayments:ue,paymentMethodAccountList:F,prettyPaymentStatus:lt,formatPrettyDate:Mt,formatDataAndHourFromUnixTimestamps:Nt,prettyPaymentMethod:Ut,methodLabel:B,prettyTypology:A}},components:{ConfirmPopup:st}};const co={class:"mt-3 line-height-3"},uo={class:"flex gap-3"},mo=n("i",{class:"pi pi-user mt-1"},null,-1),fo={class:"m-0 mb-1"},po={class:"m-0 mb-1"},_o={class:"m-0 mb-1"},vo={class:"m-0 mb-1"},ho={key:0},yo={class:"flex gap-3 mt-4"},go=n("i",{class:"pi pi-map-marker mt-1"},null,-1),bo={class:"m-0 mb-1"},ko={class:"m-0 mb-1"},xo={key:0,class:"m-0 mb-1"},wo={class:"flex gap-3 mt-4"},Co=n("i",{class:"pi pi-shopping-cart mt-1"},null,-1),So={class:"m-0 mb-1"},Do={class:"m-0 mb-1"},Oo={class:"m-0 mb-1"},Vo={key:0,class:"m-0 mb-1"},Ao={key:1,class:"m-0 mb-1"},Lo={key:2,class:"m-0 mb-1"},To={class:"m-0 mb-1"},Po={class:"m-0 mb-1"},jo={key:0},Mo={key:1},No={class:"m-0 mb-1"},Uo={key:0},Eo={key:1},Fo={class:"m-0 mb-1"},Io={key:0},Bo={key:1},$o={class:"ml-5"},zo={class:"field flex justify-content-between align-items-end mt-4 mb-3"},Ro=n("label",null,"Pagamenti",-1),qo={key:1,class:"flex gap-3 mt-4"},Ho=n("i",{class:"pi pi-comment mt-1"},null,-1);function Ko(o,e,l,t,i,u){const s=V("Badge"),m=V("Button"),S=V("InputNumber"),_=V("Column"),c=V("Calendar"),g=V("Dropdown"),b=V("DataTable"),L=V("ConfirmPopup");return d(),y("div",co,[n("div",uo,[mo,n("div",null,[n("p",fo,k(l.order.user_name)+" "+k(l.order.user_surname||"-"),1),n("p",po,k(l.order.user_email),1),n("p",_o,k(l.order.user_phone),1),n("p",vo,[z(k(l.order.country)+" ",1),l.order.user_zip?(d(),y("span",ho," - "+k(l.order.user_zip),1)):P("",!0)])])]),n("div",yo,[go,n("div",null,[n("p",bo,k(t.selectedLocation),1),n("p",ko,k(l.order.course_name),1),l.order.date?(d(),y("p",xo,k(t.formatPrettyDate(l.order.date))+" "+k(l.order.start_at),1)):P("",!0)])]),n("div",wo,[Co,n("div",null,[n("p",So,k(l.order.reservation_number),1),n("p",Do,k(t.formatDataAndHourFromUnixTimestamps(l.order.created_at)),1),n("p",Oo,k(l.order.created_by),1),l.order.status?(d(),y("p",Vo,[a(s,{value:t.prettyPaymentStatus(l.order.status),class:W([l.order.status,"px-3 border-round-lg"])},null,8,["value","class"])])):P("",!0),l.order.status=="payed"?(d(),y("p",Ao,k(t.methodLabel),1)):P("",!0),l.order.open_tickets_used&&l.order.status=="payed"?(d(),y("p",Lo,[(d(!0),y(re,null,Ae(l.order.open_tickets_used,f=>(d(),y("span",{key:f},[a(s,{value:f.code,class:"mr-2 voucher"},null,8,["value"])]))),128))])):P("",!0),n("p",To,"Codice sconto utilizzato: "+k(t.localOrder.discount_code||"-"),1),n("p",Po,[z(" Totale ordine: "),t.localOrder.total?(d(),y("span",jo,"€ "+k((+t.localOrder.total).toFixed(2)),1)):(d(),y("span",Mo,"-"))]),t.localOrder.multi_payment&&t.localOrder.paid_amount!="0.0"?(d(),y(re,{key:3},[n("p",No,[z(" Acconto versato: "),t.localOrder.paid_amount?(d(),y("span",Uo,"€ "+k((+t.localOrder.paid_amount).toFixed(2)),1)):(d(),y("span",Eo,"-"))]),n("p",Fo,[z(" Saldo rimanente: "),t.localOrder.remaining_amount?(d(),y("span",Io,"€ "+k((+t.localOrder.remaining_amount).toFixed(2)),1)):(d(),y("span",Bo,"-"))])],64)):t.localOrder.multi_payment&&(!t.localOrder.payments||t.localOrder.payments.length===0)?(d(),ee(m,{key:4,label:"Acconto / Saldo",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[0]||(e[0]=f=>t.addAmount()),class:"mt-2"})):P("",!0)])]),t.localOrder.payments&&t.localOrder.payments.length?(d(),y(re,{key:0},[n("div",$o,[n("div",zo,[Ro,t.localOrder.remaining_amount!=="0.0"?(d(),ee(m,{key:0,label:"Acconto / Saldo",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[1]||(e[1]=f=>t.addAmount())})):P("",!0)]),a(b,{value:t.localOrder.payments,dataKey:"id",size:"small",editingRows:t.editingRows,"onUpdate:editingRows":e[2]||(e[2]=f=>t.editingRows=f),editMode:"row",onRowEditSave:t.onRowEditSave,loading:t.loadingPayments},{default:w(()=>[a(_,{field:"amount",header:"Importo"},{editor:w(({data:f,field:r})=>[a(S,{modelValue:f[r],"onUpdate:modelValue":E=>f[r]=E,inputId:"currency-germany",mode:"currency",currency:"EUR",locale:"it-IT",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),body:w(f=>[z(k(f.data.amount?Number(f.data.amount).toFixed(2):"0.00")+" € ",1)]),_:1}),a(_,{field:"paid_at",header:"Data pagamento"},{body:w(f=>[z(k(f.data.paid_at),1)]),editor:w(({data:f,field:r})=>[a(c,{modelValue:f[r],"onUpdate:modelValue":E=>f[r]=E},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(_,{field:"payment_method",header:"Metodo"},{editor:w(({data:f,field:r})=>[a(g,{modelValue:f[r],"onUpdate:modelValue":E=>f[r]=E,options:t.dynamicPaymentMethods,optionLabel:"label",optionValue:"id",class:"w-full",placeholder:"Seleziona metodo..."},null,8,["modelValue","onUpdate:modelValue","options"])]),body:w(f=>[z(k(t.prettyPaymentMethod(f.data.payment_method)),1)]),_:1}),a(_,{field:"typology",header:"Tipologia"},{editor:w(({data:f,field:r})=>[a(g,{modelValue:f[r],"onUpdate:modelValue":E=>f[r]=E,options:t.typologyOptions,optionLabel:"label",optionValue:"value",class:"w-full",placeholder:"Seleziona tipologia"},null,8,["modelValue","onUpdate:modelValue","options"])]),body:w(f=>[z(k(t.prettyTypology(f.data.typology)),1)]),_:1}),a(_,{rowEditor:!0,style:{width:"8rem"},bodyStyle:"text-align:right"}),a(_,{header:""},{body:w(f=>[f.data.id!=="-1"?(d(),ee(m,{key:0,icon:"pi pi-trash",class:"p-button-text p-button-sm p-button-danger",onClick:r=>t.confirm1(f.data,r)},null,8,["onClick"])):P("",!0)]),_:1})]),_:1},8,["value","editingRows","onRowEditSave","loading"])]),a(L)],64)):P("",!0),l.order.notes?(d(),y("div",qo,[Ho,n("div",null,k(l.order.notes),1)])):P("",!0)])}const Jo=le(ro,[["render",Ko]]),Go={props:["order","location_permalink"],setup(o,e){oe(()=>{o.order&&o.order.notes&&(l.value=o.order.notes)});const l=C(),{showLoader:t,hideLoader:i}=he(),u=ne(),s=ce(),m=M(()=>s.getCurrentOrder);return{notes:l,updateOrder:async function(){const _={id:o.location_permalink,order_id:o.order.id,notes:l.value,api_version:"v2"};t(),await s.updateOrder(_).then(()=>{i(),te(u,{message:"Nota aggiornata correttamente",error:!1}),e.emit("closeDialog",m.value)}).catch(c=>{i(),q(u,c)})}}}},Wo={class:"pt-5 px-2"},Qo={class:"flex align-items-center justify-content-end mt-3"};function Xo(o,e,l,t,i,u){const s=V("Textarea"),m=V("Button");return d(),y("div",Wo,[a(s,{modelValue:t.notes,"onUpdate:modelValue":e[0]||(e[0]=S=>t.notes=S),rows:"8",cols:"30",class:"w-full"},null,8,["modelValue"]),n("div",Qo,[a(m,{label:"Annulla",text:"",onClick:e[1]||(e[1]=S=>o.$emit("closeDialog",null))}),a(m,{label:"Conferma",onClick:e[2]||(e[2]=S=>t.updateOrder())})])])}const Zo=le(Go,[["render",Xo]]),Yo={props:["order","location_permalink","date"],setup(o,e){oe(()=>{var g;o.order&&o.order.note&&(l.value=(g=o.order.note)==null?void 0:g.note)});const l=C(),{showLoader:t,hideLoader:i}=he(),u=ne(),s=ce(),m=async function(){var b;const g={location:o.location_permalink,time_slot_note:{course_id:o.order.course_id,start_at:o.order.start_at,date:o.date,note:l.value}};(b=o.order.note)!=null&&b.id?S(g):_(g)},S=async function(g){t(),g.id=o.order.note.id,await s.updateNote(g).then(()=>{i(),te(u,{message:"Nota aggiornata correttamente",error:!1}),e.emit("closeDialog",null)}).catch(b=>{i(),q(u,b)})},_=async function(g){t(),await s.createNote(g).then(()=>{i(),te(u,{message:"Nota creata correttamente",error:!1}),e.emit("closeDialog",null)}).catch(b=>{i(),q(u,b)})};return{notes:l,addNote:m,deleteNote:async function(){const g={location:o.location_permalink,id:o.order.note.id};t(),await s.deleteNote(g).then(()=>{i(),te(u,{message:"Nota eliminata correttamente",error:!1}),e.emit("closeDialog",null)}).catch(b=>{i(),q(u,b)})}}}},en={class:"pt-5 px-2"},tn={class:"flex align-items-center justify-content-end mt-3"};function on(o,e,l,t,i,u){var S,_;const s=V("Textarea"),m=V("Button");return d(),y("div",en,[a(s,{modelValue:t.notes,"onUpdate:modelValue":e[0]||(e[0]=c=>t.notes=c),rows:"8",cols:"30",class:"w-full"},null,8,["modelValue"]),n("div",tn,[(_=(S=l.order)==null?void 0:S.note)!=null&&_.id?(d(),ee(m,{key:0,label:"Elimina",text:"",onClick:e[1]||(e[1]=c=>t.deleteNote()),severity:"danger",class:"mr-2"})):P("",!0),a(m,{label:"Conferma",onClick:e[2]||(e[2]=c=>t.addNote())})])])}const nn=le(Yo,[["render",on]]),ln={class:"order-table"},an={class:""},sn={style:{width:"15rem"}},rn={class:"m-0 text-right",style:{"font-size":"12px"}},cn={key:0,class:"pi pi-exclamation-triangle cursor-pointer",style:{color:"var(--orange-400)"}},dn={style:{width:"15rem"}},un={class:"m-0 text-right",style:{"font-size":"12px"}},mn={key:0},fn=["onClick"],pn={key:0},_n=n("div",{class:"flex justify-content-center w-full"},"Check-in",-1),vn={class:"flex justify-content-center"},hn={class:"flex flex-column",style:{"margin-top":"8px"}},yn={class:"text-sm",style:{"min-height":"15px"}},gn=n("div",{class:"flex justify-content-center w-full"},"No-show",-1),bn={class:"flex justify-content-center"},kn={class:"flex flex-column",style:{"margin-top":"8px"}},xn={class:"text-sm",style:{"min-height":"15px"}},wn=["onClick"],Cn={class:"p-3"},Sn={class:"overlay-menu"},Dn=["onClick"],On=n("i",{class:"pi pi-eye mr-3"},null,-1),Vn=["onClick"],An=n("i",{class:"pi pi-shopping-cart mr-3"},null,-1),Ln=["onClick"],Tn=n("i",{class:"pi pi-print mr-3"},null,-1),Pn=["onClick"],jn=n("i",{class:"pi pi-download mr-3"},null,-1),Mn=["onClick"],Nn=n("i",{class:"pi pi-comment mr-3"},null,-1),Un=["disabled","onClick"],En=n("i",{class:"pi pi-pencil mr-3"},null,-1),Fn=["disabled","onClick"],In=n("i",{class:"pi pi-trash mr-3"},null,-1),Bn={key:0},$n={key:1},zn=n("div",{class:"flex justify-content-center w-full"},"Check-in",-1),Rn={class:"flex justify-content-center"},qn=n("div",{class:"flex justify-content-center w-full"},"No-show",-1),Hn={class:"flex justify-content-center"},Kn=n("div",{class:"flex justify-content-center w-full"},null,-1),Jn={class:"flex justify-content-center"},Gn={key:0,class:"flex mx-4"},Wn=n("div",null,[n("div",{class:"p-0 m-0 flex align-items-center"},[n("p",{style:{width:"2rem",height:"5px"},class:"mr-2 web my-0"}),n("span",{class:"text-sm"},"WEB")]),n("div",{class:"p-0 m-0 flex align-items-center justify-content-between"},[n("p",{style:{width:"2rem",height:"5px"},class:"mr-2 kalata"}),n("span",{class:"text-sm"},"SUPERGA")])],-1),Qn=[Wn],Xn=Fe({__name:"OrderTable",props:["filters"],emits:["updateFilters"],setup(o,{expose:e,emit:l}){const t=o,i=l,u=ce(),s=M(()=>u.responseOrders),m=jt(),S=M(()=>m.submitDialog),_=M(()=>u.getDeleteResponse),{showLoader:c,hideLoader:g}=he(),b=ne(),L=C(),f=C(),r=C(),E=C(),v=C(),h=C(!0),D=C(),U=C([]),B=C([]),K=C(!1),F=C(!1),H=C(),A=C(!1),$=C(!1),X=C();oe(()=>{h.value=!0,D.value={first:0,rows:L.value.rows,sortField:null,sortOrder:null},D.value.page=0,t.filters.location});function ae(){h.value=!0;let p=new Map;for(const x in t.filters){if(x=="date"){let O="";Te(t.filters.date)=="Invalid DateTime"?O=Le(t.filters.date):O=Te(t.filters.date),p.set("date",O),X.value=O}else t.filters.location&&p.set("location_permalink",t.filters.location.permalink);x=="course"&&t.filters.course.id!="-1"&&p.set("course_id",t.filters.course.id),x=="hour"&&t.filters.hour!="Tutti gli orari"&&p.set("hour",t.filters.hour),x=="name"&&p.set("customer_data",t.filters.name),x==="group_name"&&p.set("group_name",t.filters.group_name),x==="time_range"&&p.set("time_range",t.filters.time_range)}setTimeout(()=>{_e(p)},Math.random()*1e3+250)}const _e=async function(p){await u.fetchAllOrders(p).then(()=>{h.value=!1}).catch(x=>{h.value=!1,q(b,x)})},ue=(p,x)=>p>p+x?"red":"green",I=function(p,x){x&&(r.value.note=x,r.value.toggle(p))},R=function(p){p.order&&s.value.time_slots&&s.value.time_slots.forEach((x,O)=>{x.orders.forEach((J,Z)=>{J.id==p.order.id&&(s.value.time_slots[O].orders[Z]=p.order,p.check_in_done!=null&&(s.value.time_slots[O].check_in_done+=p.check_in_done))})})},G=async function(p,x){let O=[],J=!1;B.value.forEach(Y=>{if(Y.id==p.id){J=!0;return}});for(let Y of p.tickets)O.push(Y.order_item_id);const Z={check_in:x,order_item_ids:O,location_permalink:t.filters.location};await u.checkInOrder(Z).then(()=>{R(_.value),te(b,{message:"Check-in registrato correttamente",error:!1}),J&&Ce()}).catch(Y=>{q(b,Y)})},de=async function(p,x){let O=[],J=!1;B.value.forEach(Y=>{if(Y.id==p.id){J=!0;return}});for(let Y of p.tickets)O.push(Y.order_item_id);const Z={order_item_ids:O,no_show:x,location_permalink:t.filters.location.permalink};await u.noShowOrder(Z).then(()=>{R(_.value),te(b,{message:"No-show registrato correttamente",error:!1}),J&&Ce()}).catch(Y=>{q(b,Y)})},we=async function(p,x){const O={id:p,check_in:x,location_permalink:t.filters.location.permalink};await u.checkInTicket(O).then(()=>{te(b,{message:"Check-in registrato correttamente",error:!1}),R(_.value),Ce()}).catch(J=>{q(b,J)})},rt=async function(p,x){const O={id:p,no_show:x,location_permalink:t.filters.location.permalink};await u.noShowTicket(O).then(()=>{te(b,{message:"No-show registrato correttamente",error:!1}),R(_.value),Ce()}).catch(J=>{q(b,J)})},Ce=function(){let p=ct(B.value,_.value.order.id);p!=-1&&B.value.splice(p,1),B.value.push(_.value.order)},ct=function(p,x){for(let O=0;O<p.length;O++)if(p[O].id===x)return O;return-1},dt=function(p){const x={course_name:p.course_name,start_at:p.start_at,date:t.filters.date,hour:p.start_at,max_seats:p.is_free_slot?null:p.remaing_seats+""};i("updateFilters",x)},ut=function(p){K.value=!0,E.value=p},Be=function(p){R({order:p}),K.value=!1,A.value=!1},mt=function(){$.value=!1,ae()},ft=function(p){return p!=null&&p.created_by&&(p==null?void 0:p.created_by)=="WEB"?"WEB":"KALATA"},$e=function(p,x){let O=0;if(p&&p.tickets){p.tickets.forEach(Z=>{x?Z.no_show&&(O+=1):Z.check_in&&(O+=1)});let J=p.tickets.length;if(O!=J&&O!=0)return O+"/"+J}},pt=function(p,x){H.value.data=x,H.value.toggle(p)},_t=function(p,x){v.value=x.id;let O="Sei sicuro di voler eliminare questa prenotazione?";O+='<br><br> <i>N.B. Eventuali voucher presenti nella prenotazione vanno liberati manualmente dalla sezione "Data aperta"</i>',m.setDialog("Elimina prenotazione","Elimina","Annulla",O),m.setBtnSubmit(!1),m.setDynamicDialogVisibility(!0)},vt=function(){if(c(),v.value){const p={id:v.value,location_permalink:t.filters.location.permalink};u.deleteOrder(p).then(()=>{g(),te(b,{message:"La prenotazione è stata eliminata correttamente",error:!1}),s.value.time_slots&&s.value.time_slots.forEach((x,O)=>{x.orders.forEach((J,Z)=>{J.id==v.value&&(s.value.time_slots[O].orders.splice(Z,1),_.value,s.value.time_slots[O].check_in_done+=_.value.check_in_done,s.value.time_slots[O].confirmed_seats+=_.value.confirmed_seats,s.value.time_slots[O].remaing_seats-=_.value.confirmed_seats)})})}).catch(x=>{g(),q(b,x)})}},ht=function(p){U.value=p.data?[p.data]:[]},yt=function(p){B.value=p.data?[p.data]:[]},ze=function(p){F.value=!0,f.value=p},gt=function(p){A.value=!0,f.value=p},bt=function(p){$.value=!0,f.value=p},kt=function(p){const x=new Map;x.set("id",p.id),x.set("location_permalink",t.filters.location.permalink),c(),u.downloadTicket(x).then(()=>{g()}).catch(O=>{g(),q(b,O)})},xt=function(p,x){c(),Ee(p,x.location.permalink).then(()=>{g()}).catch(()=>{g()})},wt=function(p,x){c(),at(p,x.location.permalink).then(()=>{g()}).catch(()=>{g()})};return ie(S,p=>{p&&vt()}),ie(t.filters,()=>{t.filters.location&&ae()}),e({loadLazyData:ae}),(p,x)=>{const O=V("Column"),J=V("ProgressBar"),Z=V("Button"),Y=V("Badge"),Se=V("Checkbox"),Re=V("OverlayPanel"),Me=V("DataTable"),De=V("Dialog"),Oe=ge("tooltip"),Ct=ge("badge");return d(),y("div",ln,[a(Me,{value:s.value.time_slots,totalRecords:s.value.total,lazy:!0,paginator:!1,ref_key:"dt",ref:L,loading:h.value,stripedRows:"",expandedRows:U.value,"onUpdate:expandedRows":x[1]||(x[1]=T=>U.value=T),onRowExpand:ht},{empty:w(()=>[z(" Nessuna prenotazione trovata.")]),expansion:w(T=>[a(Me,{value:T.data.orders,class:"m-4 mx-4 table-order-detail",expandedRows:B.value,"onUpdate:expandedRows":x[0]||(x[0]=N=>B.value=N),rowClass:ft,onRowExpand:yt},{empty:w(()=>[z(" Nessuna prenotazione trovata.")]),expansion:w(N=>[a(Me,{value:N.data.tickets,class:"m-4 mx-5"},{default:w(()=>[a(O,{header:"Codice biglietto",field:"code"}),a(O,{header:"Tipo biglietto",field:"type"},{body:w(({data:j})=>[a(Y,{value:j.ticket_name,class:W([j.ticket_name,"px-3 border-round-lg"])},null,8,["value","class"])]),_:1}),a(O,{header:"Prezzo"},{body:w(({data:j})=>[j.ticket_price?(d(),y("span",Bn," € "+k((+j.ticket_price).toFixed(2)),1)):(d(),y("span",$n,"-"))]),_:1}),a(O,null,{header:w(()=>[zn]),body:w(({data:j})=>[n("div",Rn,[a(Se,{modelValue:j.check_in,"onUpdate:modelValue":ve=>j.check_in=ve,binary:!0,onChange:ve=>we(j.id,j.check_in),class:"check_in"},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1}),a(O,null,{header:w(()=>[qn]),body:w(({data:j})=>[n("div",Hn,[a(Se,{modelValue:j.no_show,"onUpdate:modelValue":ve=>j.no_show=ve,binary:!0,onChange:ve=>rt(j.id,j.no_show),class:"no_show"},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1}),a(O,{field:"tickets_url"},{header:w(()=>[Kn]),body:w(({data:j})=>[n("div",Jn,[pe(a(Z,{link:"",icon:"pi pi-print",href:j.tickets_url,target:"_blank",style:{color:"var(--surface-400)"},text:"",rounded:"",onClick:ve=>wt(j.id,o.filters)},null,8,["href","onClick"]),[[Oe,"Stampa",void 0,{top:!0}]])])]),_:1})]),_:2},1032,["value"])]),default:w(()=>[a(O,{header:"Codice",field:"reservation_number"}),a(O,{header:"Acquirente"},{body:w(({data:N})=>[z(k(N.user_name)+" "+k(N.user_surname)+" ",1),!N.user_name&&!N.user_surname?(d(),y("span",mn,"-")):P("",!0)]),_:1}),a(O,{header:"Gruppo"},{body:w(({data:N})=>[n("div",{class:"group cursor-pointer",onClick:j=>I(j,N.group_name)},k(N.group_name||"-"),9,fn)]),_:1}),a(O,{header:"Pagamento"},{body:w(({data:N})=>[N.status?(d(),y("span",pn,[a(Y,{value:Ze(lt)(N.status),class:W([N.status,"px-3 border-round-lg"])},null,8,["value","class"])])):P("",!0)]),_:1}),a(O,{header:"Q.ta",field:"tickets_number"}),a(O,null,{header:w(()=>[_n]),body:w(({data:N})=>[n("div",vn,[n("div",hn,[a(Se,{modelValue:N.check_in,"onUpdate:modelValue":j=>N.check_in=j,binary:!0,onChange:j=>G(N,N.check_in),class:"check_in"},null,8,["modelValue","onUpdate:modelValue","onChange"]),n("span",yn,k($e(N,!1)),1)])])]),_:1}),a(O,null,{header:w(()=>[gn]),body:w(({data:N})=>[n("div",bn,[n("div",kn,[a(Se,{modelValue:N.no_show,"onUpdate:modelValue":j=>N.no_show=j,binary:!0,onChange:j=>de(N,N.no_show),class:"no_show"},null,8,["modelValue","onUpdate:modelValue","onChange"]),n("span",xn,k($e(N,!0)),1)])])]),_:1}),a(O,{header:"Note"},{body:w(({data:N})=>[n("div",{class:"notes cursor-pointer",onClick:j=>I(j,N.notes)},k(N.notes||"-"),9,wn),a(Re,{ref_key:"op",ref:r},{default:w(()=>[n("div",Cn,k(r.value.note),1)]),_:1},512)]),_:1}),a(O,{header:"",style:{"padding-right":"0",width:"4rem"}},{body:w(({data:N})=>[a(Z,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",icon:"pi pi-ellipsis-v",text:"",rounded:"",onClick:j=>pt(j,N)},null,8,["onClick"]),a(Re,{ref_key:"visibleMenu",ref:H},{default:w(()=>[n("ul",Sn,[n("li",{onClick:j=>ze(H.value.data)},[On,z("Dettaglio ordine ")],8,Dn),n("li",{onClick:j=>ze(H.value.data)},[An,z("Dettaglio pagamento ")],8,Vn),n("li",{onClick:j=>xt(H.value.data,o.filters)},[Tn,z("Stampa ")],8,Ln),n("li",{onClick:j=>kt(H.value.data)},[jn,z("Scarica PDF ")],8,Pn),n("li",{onClick:j=>gt(H.value.data)},[Nn,z("Modifica nota ")],8,Mn),n("li",{disabled:!H.value.data.can_change_status,onClick:j=>ut(H.value.data)},[En,z("Cambia stato ")],8,Un),n("li",{disabled:!H.value.data.can_cancel,onClick:j=>_t(j,H.value.data)},[In,z("Elimina ")],8,Fn)])]),_:2},1536)]),_:1}),a(O,{expander:"",class:"pl-0 ml-0"})]),_:2},1032,["value","expandedRows"]),T.data.orders&&T.data.orders.length>0?(d(),y("div",Gn,Qn)):P("",!0)]),default:w(()=>[a(O,{header:"Percorso",field:"course_name",filterMatchMode:"contains",ref:"course_name"},null,512),a(O,{header:"Orario",field:"start_at",filterMatchMode:"contains",ref:"start_at"},{body:w(({data:T})=>[n("div",an,[n("span",{class:W(T.is_free_slot?"free":"")},k(T.start_at),3)])]),_:1},512),a(O,{header:"Posti prenotati",ref:"availabe_tickets",field:"availabe_tickets"},{body:w(({data:T})=>[n("div",sn,[n("p",rn,[z(k(T.confirmed_seats)+"/"+k(T.remaing_seats+T.confirmed_seats)+" ",1),T.confirmed_seats>T.remaing_seats+T.confirmed_seats?pe((d(),y("i",cn,null,512)),[[Oe,T.confirmed_seats-(T.remaing_seats+T.confirmed_seats)+" posti in overbooking",void 0,{top:!0}]]):P("",!0)]),a(J,{value:T.confirmed_seats*100/(T.remaing_seats+T.confirmed_seats),showValue:!1,style:{height:"10px"},class:W(["available-progress",ue(T.confirmed_seats,T.remaing_seats)])},null,8,["value","class"])])]),_:1},512),a(O,{header:"Check-in",ref:"confirmed_tickets",field:"confirmed_tickets"},{body:w(({data:T})=>[n("div",dn,[n("p",un,k(T.check_in_done)+"/"+k(T.confirmed_seats),1),a(J,{value:T.check_in_done*100/(T.remaing_seats+T.confirmed_seats),showValue:!1,style:{height:"10px"},class:"check-in-progress"},null,8,["value"])])]),_:1},512),a(O,null,{body:w(({data:T})=>[pe(a(Z,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",class:W(["mr-2 text-primary",{"is-present":T.note&&T.note!==0}]),icon:"pi pi-comment",text:"",rounded:"",onClick:N=>bt(T)},null,8,["class","onClick"]),[[Oe,"Nota",void 0,{top:!0}],[Ct,void 0,void 0,{danger:!0}]]),pe(a(Z,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",class:"mr-0 text-primary",icon:"pi pi-calendar",text:"",rounded:"",onClick:N=>dt(T)},null,8,["onClick"]),[[Oe,"Prenota",void 0,{top:!0}]])]),_:1}),a(O,{expander:"",style:{width:"5rem"}})]),_:1},8,["value","totalRecords","loading","expandedRows"]),a(De,{visible:K.value,"onUpdate:visible":x[3]||(x[3]=T=>K.value=T),modal:"",header:"Stato pagamento",style:{width:"35rem"}},{default:w(()=>[a(Zt,{location_permalink:o.filters.location.permalink,time_slot:E.value,onCloseDialog:x[2]||(x[2]=T=>Be(T))},null,8,["location_permalink","time_slot"])]),_:1},8,["visible"]),a(De,{visible:F.value,"onUpdate:visible":x[4]||(x[4]=T=>F.value=T),modal:"",header:"Dettaglio ordine",style:{width:"70rem"},onAfterHide:ae},{default:w(()=>[a(Jo,{order:f.value},null,8,["order"])]),_:1},8,["visible"]),a(De,{visible:A.value,"onUpdate:visible":x[6]||(x[6]=T=>A.value=T),modal:"",header:"Modifica nota",style:{width:"35rem"}},{default:w(()=>[a(Zo,{order:f.value,location_permalink:o.filters.location.permalink,onCloseDialog:x[5]||(x[5]=T=>Be(T))},null,8,["order","location_permalink"])]),_:1},8,["visible"]),a(De,{visible:$.value,"onUpdate:visible":x[8]||(x[8]=T=>$.value=T),modal:"",header:"Nota",style:{width:"35rem"}},{default:w(()=>[a(nn,{date:X.value,order:f.value,location_permalink:o.filters.location.permalink,onCloseDialog:x[7]||(x[7]=T=>mt())},null,8,["date","order","location_permalink"])]),_:1},8,["visible"])])}}});const Zn={props:["filters"],setup(o,e){oe(()=>{l.value=o.filters,l.value.date=new Date,f()});const l=C({}),t=ke(),i=ce(),u=ne(),s=C([]),m=C(),S=se.now().plus({years:1}),_=M(()=>t.allLocations),c=M(()=>i.getCalendar),g=async function(v){await i.fetchCalendar(v).then(()=>{}).catch(h=>{q(u,h)})},b=function(){if(o.filters.location){const v=_.value.find(h=>h.permalink===o.filters.location);s.value=v.courses}},L=function(v){let h={};h.month=se.fromJSDate(new Date(v)).month,h.year=se.fromJSDate(new Date(v)).year,h.location_permalink=o.filters.location.permalink?o.filters.location.permalink:o.filters.location,m.value={month:h.month,year:h.year},g(h)},f=function(){let v=se.now(),h={location_permalink:"",month:"",year:""};h.location_permalink=o.filters.location.permalink?o.filters.location.permalink:o.filters.location,h.month=v.month+"",h.year=v.year+"",g(h)},r=function(v){if(c.value.web_dates&&c.value.web_dates.length!=0){let h=v.month+1;h=h<10?"0"+h:h;let D=v.day<10?"0"+v.day:v.day,U=v.year+"-"+h+"-"+D;return c.value.web_dates.find(B=>B==U)}},E=function(v){let h={location_permalink:o.filters.location.permalink?o.filters.location.permalink:o.filters.location,month:v.month,year:v.year};g(h)};return ie(o.filters,()=>{if(m.value){let v={location_permalink:o.filters.location.permalink?o.filters.location.permalink:o.filters.location,month:m.value.month,year:m.value.year};g(v)}else f()}),{form:l,courses:s,maxAllowedDate:S,locations:_,calendar:c,getCourses:b,onDateChange:L,getDayFromDate:r,onMonthChange:E}}};const Yn={class:"flex calendar-filter"},el={key:0,class:"special-day"};function tl(o,e,l,t,i,u){const s=V("Calendar");return d(),y("div",Yn,[a(s,{modelValue:t.form.date,"onUpdate:modelValue":e[0]||(e[0]=m=>t.form.date=m),inline:"",onDateSelect:e[1]||(e[1]=m=>t.onDateChange(m)),onMonthChange:e[2]||(e[2]=m=>t.onMonthChange(m)),maxDate:t.maxAllowedDate.toJSDate()},{date:w(m=>[t.getDayFromDate(m.date)?(d(),y("div",el,[n("span",null,k(m.date.day),1)])):(d(),y(re,{key:1},[z(k(m.date.day),1)],64))]),_:1},8,["modelValue","maxDate"])])}const ol=le(Zn,[["render",tl]]);class nl{static async fetchAll(e){const l=e.location_permalink;return delete e.location_permalink,(await Ue(`/ticket_office/${l}/search/courses`,e)).data}}const it=Pe({id:"course",state:()=>({course:{},courses:[],response_courses:{}}),getters:{allCourses:o=>o.response_courses.tickets,responseCourses:o=>o.response_courses,getTotalCourses:o=>o.response_courses?o.response_courses.total:0,getCurrentCourse:o=>o.course},actions:{async fetchAllCourses(o){await nl.fetchAll(o).then(e=>this.response_courses=e)}}}),xe=o=>(Ye("data-v-af54a2c4"),o=o(),et(),o),ll={class:"formgrid grid px-0 align-items-center"},al={key:0,class:"field col-4 flex flex-column"},sl=xe(()=>n("label",{for:"typology"},"Filtra per percorso",-1)),il={key:1,class:"field col-3 flex flex-column"},rl=xe(()=>n("label",{for:"typology"},"Filtra per orario",-1)),cl=xe(()=>n("div",{class:"col-12"},null,-1)),dl={class:"field col-4 flex flex-column"},ul=xe(()=>n("label",{for:"typology"},"Filtra per acquirente",-1)),ml={class:"field col-3 flex flex-column"},fl=xe(()=>n("label",{for:"typology"},"Filtra per gruppo",-1)),pl={class:"flex col-12 justify-content-end pt-1"},_l=Fe({__name:"OrderFilter",props:{filters:{}},emits:["onSubmit"],setup(o,{emit:e}){const l=o,t=e,i=C({}),u=ke(),s=ne();C([]);const m=C([{name:"Mattino",value:"morning"},{name:"Pomeriggio",value:"afternoon"},{name:"Sera",value:"evening"}]);M(()=>S.currentTimeRange);const S=ce(),_=it(),c=M(()=>u.allLocations),g=M(()=>S.responseOrders),b=M(()=>{var D;const h=[..._.allCourses||[]];return h.length>0&&((D=h[0])==null?void 0:D.id)!="-1"&&h.unshift({id:"-1",name:"Tutti i percorsi"}),h}),L=M({get:()=>{var h;return i.value.course??((h=b.value[0])==null?void 0:h.id)},set:h=>i.value.course=h}),f=M(()=>l.filters.date?new Date(l.filters.date):null),r=function(){i.value.name=null,i.value.course=null,i.value.group=null,i.value.slot="morning",t("onSubmit",i.value)},E=function(){i.value.slot="morning",t("onSubmit",i.value)},v=async function(){var D,U;const h={location_permalink:(U=(D=i.value)==null?void 0:D.location)==null?void 0:U.permalink,api_version:"v2"};await _.fetchAllCourses(h).then(()=>{}).catch(B=>{q(s,B)})};return oe(()=>{i.value.date=se.now().toFormat("dd/MM/yyyy")}),ie(()=>c.value,()=>{l.filters.location&&c.value&&(i.value=Object.assign({},{...l.filters}),v())}),ie(()=>l.filters,()=>{l.filters.location&&c.value&&i.value.location&&i.value.location!=l.filters.location&&(i.value=Object.assign({},{...l.filters}))}),ie(()=>S.currentTimeRange,h=>{const D=f.value?se.fromJSDate(f.value).hasSame(se.now(),"day"):!1;h&&D&&(i.value.slot=h,t("onSubmit",i.value))}),ie(()=>f.value,(h,D)=>{const U=h?se.fromJSDate(h).hasSame(se.now(),"day"):!1;D!=null&&(U&&S.currentTimeRange?(i.value.slot=S.currentTimeRange,t("onSubmit",i.value)):E())}),(h,D)=>{const U=V("Dropdown"),B=V("SelectButton"),K=V("InputText"),F=V("Button"),H=V("AccordionTab"),A=V("Accordion");return d(),ee(A,{activeIndex:0},{default:w(()=>[a(H,{header:"FILTRI"},{default:w(()=>[n("div",ll,[i.value.location&&b.value?(d(),y("div",al,[sl,a(U,{modelValue:L.value,"onUpdate:modelValue":D[0]||(D[0]=$=>L.value=$),options:b.value,optionLabel:"name",optionValue:"id",placeholder:""},null,8,["modelValue","options"])])):P("",!0),g.value?(d(),y("div",il,[rl,a(B,{modelValue:i.value.slot,"onUpdate:modelValue":D[1]||(D[1]=$=>i.value.slot=$),options:m.value,optionLabel:"name","aria-labelledby":"multiple","option-value":"value"},null,8,["modelValue","options"])])):P("",!0),cl,n("div",dl,[ul,a(K,{modelValue:i.value.name,"onUpdate:modelValue":D[2]||(D[2]=$=>i.value.name=$),placeholder:""},null,8,["modelValue"])]),n("div",ml,[fl,a(K,{modelValue:i.value.group,"onUpdate:modelValue":D[3]||(D[3]=$=>i.value.group=$),placeholder:""},null,8,["modelValue"])])]),n("div",pl,[a(F,{label:"Ricerca",class:"mr-2",onClick:D[4]||(D[4]=$=>h.$emit("onSubmit",i.value))}),a(F,{label:"Annulla",class:"p-button-outlined",onClick:D[5]||(D[5]=$=>r())})])]),_:1})]),_:1})}}});const vl=le(_l,[["__scopeId","data-v-af54a2c4"]]),hl={props:["form","price","index","ticket"],setup(o,e){const l=C(0),t=function(){l.value++,u()},i=function(){l.value>0&&l.value--,u()},u=function(){l.value==null&&(l.value=0);const s={counter:l.value,price:o.price,index:o.index,ticket:o.ticket};e.emit("changeCounter",s)};return{counter:l,decrement:i,increment:t,emitEvent:u}}};const yl={class:"btn-plus-min flex align-items-center"},gl={class:"counter"};function bl(o,e,l,t,i,u){const s=V("Button"),m=V("InputNumber");return d(),y("div",yl,[a(s,{icon:"pi pi-minus",rounded:"",outlined:"",severity:"secondary",onClick:t.decrement,disabled:t.counter===0},null,8,["onClick","disabled"]),n("div",gl,[a(m,{modelValue:t.counter,"onUpdate:modelValue":[e[0]||(e[0]=S=>t.counter=S),e[1]||(e[1]=S=>t.emitEvent())],min:0},null,8,["modelValue"])]),a(s,{icon:"pi pi-plus",rounded:"",outlined:"",severity:"secondary",onClick:t.increment},null,8,["onClick"])])}const kl=le(hl,[["render",bl]]),xl={props:["tickets","form"],setup(o,e){oe(()=>{i.value=!1,s.discount={},u.value=null,o.form.max_seats&&o.form.max_seats<0?(_.value=!0,c.value=-o.form.max_seats):_.value=!1});const l=C(0),t=C([]),i=C(!1),u=C(),s=ce(),m=ne(),S=C(!1),_=C(!1),c=C(),g=M(()=>s.getDiscount),b=function(v){t.value[v.index]={partial_total:v.price*v.counter,ticket:v.ticket,quantity:v.counter},l.value=0;let h=0;t.value.forEach(D=>{l.value+=D.partial_total,h+=D.quantity}),_.value||(o.form.max_seats&&h>+o.form.max_seats?(c.value=h-+o.form.max_seats,S.value=!0):(c.value=null,S.value=!1)),u.value&&f()},L=function(){f()},f=async function(){let v=[];t.value.forEach(D=>{v.push({id:D.ticket.id,quantity:D.quantity})});const h={discount_code:u.value,location_permalink:o.form.location_permalink,tickets:v};await s.cost(h).then(()=>{}).catch(D=>{q(m,D)})};return{total:l,partialTotals:t,showDiscount:i,discountCode:u,discount:g,showAlert:S,showAlert2:_,numOverbooking:c,onChangeCounter:b,applyDiscount:L,checkDisabled:function(){let v=!1;(!t.value||t.value.length==0)&&(v=!0);let h=0;return t.value.forEach(D=>{h+=D.quantity}),h==0&&(v=!0),e.emit("disableSecondoTab",!0),v},nextTab:function(){const v={discount_code:u.value,partial_total:t.value};e.emit("nextTab",v)}}},components:{PlusMinusButton:kl}};const wl={key:0},Cl={key:1},Sl={key:0},Dl={key:1},Ol={key:0,class:"flex justify-content-between align-items-center"},Vl={class:"flex align-items-center col-9"},Al={class:"col-7 pl-0"},Ll={class:"text-right col-2"},Tl={class:"col-3 flex justify-content-end"},Pl={key:2,class:"mt-3 mb-5"},jl=n("i",null,"Nessuna tipologia di biglietto trovata.",-1),Ml=[jl],Nl=n("hr",{class:"mt-3"},null,-1),Ul={class:"flex align-items-center justify-content-between py-0"},El={class:"col-9 flex"},Fl=n("b",null,"Totale",-1),Il=[Fl],Bl={class:"col-2 text-right font-bold"},$l={class:"col-3 flex justify-content-end"};function zl(o,e,l,t,i,u){const s=V("Message"),m=V("PlusMinusButton"),S=V("Button");return d(),y(re,null,[t.showAlert?(d(),ee(s,{key:0,severity:"warn",closable:!1},{default:w(()=>[z("Attenzione! Si sta andando in overbooking di "+k(t.numOverbooking)+" ",1),t.numOverbooking==1?(d(),y("span",wl,"posto")):(d(),y("span",Cl,"posti"))]),_:1})):P("",!0),t.showAlert2?(d(),ee(s,{key:1,severity:"warn",closable:!1},{default:w(()=>[z("Attenzione! Lo slot orario è già in overbooking di "+k(t.numOverbooking)+" ",1),t.numOverbooking==1?(d(),y("span",Sl,"posto")):(d(),y("span",Dl,"posti"))]),_:1})):P("",!0),(d(!0),y(re,null,Ae(l.tickets,(_,c)=>{var g,b,L;return d(),y("div",{key:_.id},[((g=_.course)==null?void 0:g.id)==((b=l.form.course)==null?void 0:b.id)?(d(),y("div",Ol,[n("div",Vl,[n("b",Al,k(_.name),1),n("div",Ll,"€ "+k((L=_.price)==null?void 0:L.toFixed(2)),1)]),n("div",Tl,[a(m,{onChangeCounter:e[0]||(e[0]=f=>t.onChangeCounter(f)),price:_.price,index:c,ticket:_},null,8,["price","index","ticket"])])])):P("",!0)])}),128)),l.tickets&&l.tickets.length==0?(d(),y("div",Pl,Ml)):P("",!0),Nl,n("div",Ul,[n("div",El,[n("div",{class:W(["pl-0",t.discount&&t.discount.total_amount?"col-2":"col-7"])},Il,2),n("div",Bl,"€ "+k(t.total.toFixed(2)),1)]),n("div",$l,[a(S,{label:"Prosegui",onClick:e[1]||(e[1]=_=>t.nextTab()),disabled:t.checkDisabled()},null,8,["disabled"])])])],64)}const Rl=le(xl,[["render",zl]]);class ql{static async fetchAll(){return(await tt("/countries")).data.countries}}const Hl=Pe({id:"country",state:()=>({country:{},countries:[]}),getters:{allCountries:o=>o.countries},actions:{async fetchAllCountries(){await ql.fetchAll().then(o=>this.countries=o)}}});class Kl{static async fetchAll(){return(await tt("/provinces")).data.provinces}}const Jl=Pe({id:"province",state:()=>({province:{},provinces:[]}),getters:{allProvinces:o=>o.provinces,getCurrentProvince:o=>o.province},actions:{async fetchAllProvinces(){await Kl.fetchAll().then(o=>this.provinces=o)}}}),Gl={computed:{Code(){return Code}},props:["location_permalink"],setup(o,e){oe(()=>{h(),D()});const l=je(),t=Hl(),i=ce(),u=Jl(),s=C({}),m=C(),S=C(),_=C(),c=C(),g=M(()=>t.allCountries),b=M(()=>l.allOpenTickets),L=M(()=>i.paymentStatus),f=M(()=>i.paymentModeList),r=M(()=>u.allProvinces),E=M(()=>{const F=i.getPaymentMethods;return Object.entries(F).map(([H,A])=>({id:H,label:A}))}),v=M(()=>i.paymentMethodAccountList),h=async function(){await t.fetchAllCountries().then(()=>{s.value.country_id=88,s.value.status={id:"payed",name:"Pagato"}})},D=async function(){await u.fetchAllProvinces()},U=async function(F){const H={code:F.query.toUpperCase(),location_permalink:o.location_permalink};await l.fetchAllOpenTickets(H)},B=function(){s.value.status.id&&(s.value.status.id=="free"||s.value.status.id=="to_pay")&&(s.value.payment_method=null)},K=function(){if(s.value.status&&s.value.status.id=="payed"&&s.value.open_ticket_codes){for(const F of s.value.open_ticket_codes)if(F.expired){S.value="Uno o più codici biglietto risultano scaduti";return}}if(!(s.value.amount&&(s.value.payment_method_deposit||(m.value="Seleziona un metodo di pagamento"),s.value.paid_at||(_.value="Inserisci la data di versamento dell'acconto"),m.value||_.value))){if(!s.value.payment_method&&s.value.status.id!="free"&&s.value.status.id!="to_pay"){c.value="Seleziona un metodo di pagamento";return}e.emit("nextTab",s.value)}};return ie(()=>s.value.multi_payment,F=>{F&&(s.value.status={id:"to_pay",name:"Da pagare"})}),{form:s,countries:g,paymentList:L,paymentModeList:f,errorMessage:m,errorMessageVoucher:S,errorMessageDate:_,errorPaymentMethod:c,open_tickets:b,provinces:r,dynamicPaymentMethods:E,paymentMethodAccountList:v,fetchAllOpenTickets:U,onChangeStatus:B,onConfirm:K}}};const Q=o=>(Ye("data-v-d52f2f9e"),o=o(),et(),o),Wl={key:0,class:"formgrid grid"},Ql={class:"field col-6"},Xl=Q(()=>n("label",{for:"user_name"},"Nome",-1)),Zl={class:"field col-6"},Yl=Q(()=>n("label",{for:"user_surname"},"Cognome",-1)),ea={class:"field col-6"},ta=Q(()=>n("label",{for:"user_surname"},"Nome gruppo",-1)),oa={class:"field col-6"},na=Q(()=>n("label",{for:"user_email"},"Email",-1)),la={class:"field col-6"},aa=Q(()=>n("label",{for:"user_phone"},"Telefono",-1)),sa={class:"field col-6"},ia=Q(()=>n("label",{for:"country_id"},"Nazione",-1)),ra={class:"field col-6"},ca=Q(()=>n("label",{for:"province"},"Provincia",-1)),da={class:"field col-6"},ua=Q(()=>n("label",{for:"status"},"Stato pagamento",-1)),ma={key:0,class:"field col-6"},fa=Q(()=>n("label",{for:"payment_method"},"Modalità pagamento*",-1)),pa={class:"p-float-label mb-0"},_a={class:"p-error",id:"dd-error"},va={key:1,class:"field col-6 flex flex-column"},ha=Q(()=>n("label",{for:"user_zip"},"Codice biglietto",-1)),ya={key:0,class:"pi pi-exclamation-triangle",style:{color:"#ff6767"}},ga={class:"p-error",id:"dd-error"},ba={class:"field col-12"},ka=Q(()=>n("label",{for:"payment_method",class:"text-sm ml-2"},"Acconto",-1)),xa=Q(()=>n("div",{class:"field col-6"},null,-1)),wa={key:2,class:"col-12 pl-0 flex flex-wrap"},Ca={class:"field col-6 mb-0"},Sa=Q(()=>n("label",{for:"deposit"},"Importo acconto",-1)),Da={class:"field col-6 mb-0"},Oa=Q(()=>n("label",{for:"payment_method_deposit"},"Modalità pagamento*",-1)),Va={class:"p-float-label mb-0"},Aa={class:"p-error",id:"dd-error"},La={class:"field col-6"},Ta=Q(()=>n("label",{for:"deposit"},"Data versamento acconto*",-1)),Pa={class:"p-error",id:"dd-error"},ja={class:"field col-12"},Ma={class:"field flex flex-column"},Na=Q(()=>n("label",{for:"notes"},"Note",-1)),Ua={class:"col-12 flex justify-content-end"};function Ea(o,e,l,t,i,u){const s=V("InputText"),m=V("Dropdown"),S=V("AutoComplete"),_=V("Checkbox"),c=V("InputNumber"),g=V("Calendar"),b=V("Textarea"),L=V("Button"),f=ge("tooltip");return t.form?(d(),y("div",Wl,[n("div",Ql,[Xl,a(s,{type:"text",modelValue:t.form.user_name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.user_name=r),class:"w-full"},null,8,["modelValue"])]),n("div",Zl,[Yl,a(s,{type:"text",modelValue:t.form.user_surname,"onUpdate:modelValue":e[1]||(e[1]=r=>t.form.user_surname=r),class:"w-full"},null,8,["modelValue"])]),n("div",ea,[ta,a(s,{type:"text",modelValue:t.form.group_name,"onUpdate:modelValue":e[2]||(e[2]=r=>t.form.group_name=r),class:"w-full"},null,8,["modelValue"])]),n("div",oa,[na,a(s,{type:"text",modelValue:t.form.user_email,"onUpdate:modelValue":e[3]||(e[3]=r=>t.form.user_email=r),class:"w-full"},null,8,["modelValue"])]),n("div",la,[aa,a(s,{type:"text",modelValue:t.form.user_phone,"onUpdate:modelValue":e[4]||(e[4]=r=>t.form.user_phone=r),class:"w-full"},null,8,["modelValue"])]),n("div",sa,[ia,a(m,{modelValue:t.form.country_id,"onUpdate:modelValue":e[5]||(e[5]=r=>t.form.country_id=r),options:t.countries,optionLabel:"name",optionValue:"id",class:"w-full"},null,8,["modelValue","options"])]),n("div",ra,[ca,a(m,{modelValue:t.form.user_zip,"onUpdate:modelValue":e[6]||(e[6]=r=>t.form.user_zip=r),options:t.provinces,optionLabel:"name",optionValue:"name",class:"w-full"},null,8,["modelValue","options"])]),n("div",da,[ua,a(m,{modelValue:t.form.status,"onUpdate:modelValue":e[7]||(e[7]=r=>t.form.status=r),options:t.paymentList,optionLabel:"name",class:"w-full mb-0",onChange:e[8]||(e[8]=r=>t.onChangeStatus())},null,8,["modelValue","options"])]),t.form.status&&t.form.status.id=="payed"?(d(),y("div",ma,[fa,n("span",pa,[a(m,{modelValue:t.form.payment_method,"onUpdate:modelValue":e[9]||(e[9]=r=>t.form.payment_method=r),options:t.dynamicPaymentMethods,optionLabel:"label",class:W(["w-full",{"p-invalid":t.errorPaymentMethod}]),disabled:t.form.status&&t.form.status.id!="payed",onChange:e[10]||(e[10]=r=>t.errorPaymentMethod=null)},null,8,["modelValue","options","disabled","class"])]),n("small",_a,k(t.errorPaymentMethod||" "),1)])):P("",!0),t.form.payment_method&&t.form.payment_method.id=="voucher"?(d(),y("div",va,[ha,a(S,{modelValue:t.form.open_ticket_codes,"onUpdate:modelValue":e[11]||(e[11]=r=>t.form.open_ticket_codes=r),suggestions:t.open_tickets,class:W(["uppercase w-full",{"p-invalid":t.errorMessageVoucher}]),onComplete:e[12]||(e[12]=r=>t.fetchAllOpenTickets(r)),emptySearchMessage:"Nessun risultato",emptySelectionMessage:"Nessun risultato",optionLabel:"code",optionValue:"code",multiple:"",onChange:e[13]||(e[13]=r=>t.errorMessageVoucher=null)},{option:w(({option:r})=>[n("span",{class:"flex flex-row justify-content-between",style:Qe({color:r.expired?"#ff6767":null})},[z(k(r.code)+" ",1),r.expired?pe((d(),y("i",ya,null,512)),[[f,"Scaduto"]]):P("",!0)],4)]),_:1},8,["modelValue","suggestions","class"]),n("small",ga,k(t.errorMessageVoucher||" "),1)])):P("",!0),n("div",ba,[a(_,{modelValue:t.form.multi_payment,"onUpdate:modelValue":e[14]||(e[14]=r=>t.form.multi_payment=r),binary:!0,class:"deposit"},null,8,["modelValue"]),ka]),xa,t.form.multi_payment?(d(),y("div",wa,[n("div",Ca,[Sa,a(c,{modelValue:t.form.amount,"onUpdate:modelValue":e[15]||(e[15]=r=>t.form.amount=r),inputId:"currency-germany",mode:"currency",currency:"EUR",locale:"it-IT",class:"w-full"},null,8,["modelValue"])]),n("div",Da,[Oa,n("span",Va,[a(m,{modelValue:t.form.payment_method_deposit,"onUpdate:modelValue":e[16]||(e[16]=r=>t.form.payment_method_deposit=r),options:t.dynamicPaymentMethods,optionLabel:"label",class:W(["w-full",{"p-invalid":t.errorMessage}]),onChange:e[17]||(e[17]=r=>t.errorMessage=null)},null,8,["modelValue","options","class"])]),n("small",Aa,k(t.errorMessage||" "),1)]),n("div",La,[Ta,a(g,{modelValue:t.form.paid_at,"onUpdate:modelValue":e[18]||(e[18]=r=>t.form.paid_at=r),class:W(["w-full",{"p-invalid":t.errorMessageDate}]),onChange:e[19]||(e[19]=r=>t.errorMessageDate=null)},null,8,["modelValue","class"]),n("small",Pa,k(t.errorMessageDate||" "),1)])])):P("",!0),n("div",ja,[n("div",Ma,[Na,a(b,{modelValue:t.form.notes,"onUpdate:modelValue":e[20]||(e[20]=r=>t.form.notes=r),rows:"5",cols:"30"},null,8,["modelValue"])])]),n("div",Ua,[a(L,{label:"Conferma",onClick:e[21]||(e[21]=r=>t.onConfirm())})])])):P("",!0)}const Fa=le(Gl,[["render",Ea],["__scopeId","data-v-d52f2f9e"]]);var Ia=`
@layer primevue {
    .p-contextmenu ul {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    .p-contextmenu .p-submenu-list {
        position: absolute;
        min-width: 100%;
        z-index: 1;
    }

    .p-contextmenu .p-menuitem-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        text-decoration: none;
        overflow: hidden;
        position: relative;
    }

    .p-contextmenu .p-menuitem-text {
        line-height: 1;
    }

    .p-contextmenu .p-menuitem {
        position: relative;
    }

    .p-contextmenu .p-menuitem-link .p-submenu-icon {
        margin-left: auto;
    }

    .p-contextmenu-enter-from {
        opacity: 0;
    }

    .p-contextmenu-enter-active {
        transition: opacity 250ms;
    }
}
`,Ba={root:function(e){var l=e.instance;return["p-contextmenu p-component",{"p-input-filled":l.$primevue.config.inputStyle==="filled","p-ripple-disabled":l.$primevue.config.ripple===!1}]},menu:"p-contextmenu-root-list",menuitem:function(e){var l=e.instance,t=e.processedItem;return["p-menuitem",{"p-menuitem-active p-highlight":l.isItemActive(t),"p-focus":l.isItemFocused(t),"p-disabled":l.isItemDisabled(t)}]},content:"p-menuitem-content",action:function(e){var l=e.props,t=e.isActive,i=e.isExactActive;return["p-menuitem-link",{"router-link-active":t,"router-link-active-exact":l.exact&&i}]},icon:"p-menuitem-icon",label:"p-menuitem-text",submenuIcon:"p-submenu-icon",submenu:"p-submenu-list",separator:"p-menuitem-separator"};Xe.extend({name:"contextmenu",css:Ia,classes:Ba});const $a={props:["form"],setup(o,e){oe(()=>{r()});const l=C(0),t=C([]),i=C(!1),u=C(!0),s=C(),m=C([]),{showLoader:S,hideLoader:_}=he(),c=je(),g=ce(),b=ne(),L=M(()=>c.allTickets),f=M(()=>g.getCurrentOrder),r=async function(){const A={location_permalink:o.form.location_permalink,api_version:"v2",date:v(o.form.date),course_id:o.form.course.id};await c.fetchAllTickets(A).then(()=>{}).catch($=>{q(b,$)})},E=function(A){l.value+=1,s.value=A.discount_code,t.value=Object.assign([],A.partial_total),u.value=!1},v=function(A){return Te(A).includes("Invalid")?Le(A):Te(A)},h=function(A){D(A)},D=async function(A){var _e,ue,I,R;S();const $=[{start_at:o.form.hour,tickets:[]}];t.value.forEach(G=>{G.quantity!=0&&$[0].tickets.push({id:G.ticket.id,quantity:G.quantity})});let X=[];A.open_ticket_codes&&A.open_ticket_codes.forEach(G=>{X.push(G.code)});const ae={location_permalink:o.form.location_permalink,country_id:A.country_id,status:A.status.id,group_name:A.group_name,user_email:A.user_email,user_name:A.user_name,user_phone:A.user_phone,user_surname:A.user_surname,user_zip:A.user_zip,api_version:"v2",date:o.form.date?v(o.form.date):"",notes:A.notes,time_slots:$,payment_method:((_e=A.payment_method)==null?void 0:_e.id)||null,course_id:(I=(ue=o.form)==null?void 0:ue.course)==null?void 0:I.id,open_ticket_codes:X,multi_payment:A.multi_payment,payments:[]};A.multi_payment&&(A.amount&&A.payment_method_deposit?ae.payments=[{amount:A.amount,typology:"deposit",payment_method:(R=A.payment_method_deposit)==null?void 0:R.id,paid_at:Le(A.paid_at)}]:ae.payments=[]),s.value&&(ae.discount_code=s.value),await g.createOrder(ae).then(()=>{l.value+=1,u.value=!0,i.value=!0,_()}).catch(G=>{_(),q(b,G)})},U=function(){Ee(f==null?void 0:f.value,o.form.location_permalink),e.emit("closeDialog",!0)},B=function(A){u.value=A},K=function(){Ee(f==null?void 0:f.value,o.form.location_permalink),F()},F=async function(){let A=[];if(!f.value&&!o.form.location_permalink)return;for(let X of f.value.tickets)A.push(X.order_item_id);const $={check_in:!0,order_item_ids:A,location_permalink:o.form.location_permalink};await g.checkInOrder($).then(()=>{te(b,{message:"Check-in registrato correttamente",error:!1}),e.emit("closeDialog",!0)}).catch(X=>{q(b,X)})},H=function(){S();const A={location_permalink:o.form.location_permalink,order_id:f.value.id};g.sendEmail(A).then(()=>{te(b,{message:"Email inviata correttamente al cliente",error:!1}),_(),e.emit("closeDialog",!0)}).catch($=>{_(),q(b,$)})};return ie(f,()=>{m.value=[],f.value.tickets.forEach(A=>{const $=m.value.find(X=>X.ticket_name===A.ticket_name);if(!$)A.quantity=1,m.value.push(A);else{let X=m.value.indexOf($);m.value[X].quantity+=1}})}),{tickets:L,active:l,partialTotals:t,showOrderDetail:i,currentOrder:f,tmp_tickets:m,showSecondTab:u,formatExplicitDate:ot,formatDate:Ie,onNextTab:E,onConfirmPayment:h,printPDF:at,onPrintPDF:U,onDisableSecondoTab:B,printAndCheckIn:K,sendEmail:H}},components:{NewOrderTicketTab:Rl,NewOrderFormTab:Fa}};const za={key:0,class:"info-box"},Ra={class:"font-medium"},qa=n("i",{class:"pi pi-map-marker mr-3 font-medium"},null,-1),Ha={class:"font-medium"},Ka=n("i",{class:"pi pi-calendar mr-3 font-medium"},null,-1),Ja={key:0,class:"capitalize"},Ga={key:0,class:"flex pb-4"},Wa=n("i",{class:"pi pi-ticket mr-3 font-medium mt-1"},null,-1),Qa={class:"flex flex-column"},Xa={key:0,class:"pb-1 pr-1"},Za={key:1,class:"pb-1"},Ya={class:"py-5"},es={class:"m-0 text-center line-height-3"},ts=n("br",null,null,-1),os={key:0,class:"col-offset-3 col-6 flex justify-content-center flex-column align-items-center mt-4 order-summary"},ns=n("p",{class:"my-2"},[n("b",null,"Riepilogo ordine:")],-1),ls={class:"flex flex-column col-12"},as={key:0,class:"pb-1",style:{"min-width":"8rem"}},ss={key:1,class:"pb-1"},is={key:2},rs={class:"flex flex-column col-12"},cs={key:0,class:"p-0 m-0 font-medium flex justify-content-between"},ds=n("span",{class:"pb-1 pr-1"},"Totale ordine ",-1),us={class:"pb-1"},ms={class:"flex align-items-center justify-content-center mt-4"};function fs(o,e,l,t,i,u){var g,b;const s=V("NewOrderTicketTab"),m=V("TabPanel"),S=V("NewOrderFormTab"),_=V("Button"),c=V("TabView");return d(),y(re,null,[l.form?(d(),y("div",za,[n("p",Ra,[qa,z(k((g=l.form.course)==null?void 0:g.name),1)]),n("p",Ha,[Ka,l.form.date?(d(),y("span",Ja,k(t.formatDate((b=l.form)==null?void 0:b.date)),1)):P("",!0),z(" - "+k(l.form.hour),1)]),t.partialTotals&&t.partialTotals.length>0?(d(),y("div",Ga,[Wa,n("div",Qa,[(d(!0),y(re,null,Ae(t.partialTotals,L=>{var f;return d(),y("p",{class:"p-0 m-0 font-medium flex justify-content-between",key:L},[L&&L.quantity!=0?(d(),y("span",Xa,k((f=L.ticket)==null?void 0:f.name),1)):P("",!0),L&&L.quantity!=0?(d(),y("span",Za," x "+k(L.quantity)+" "+k(L.price),1)):P("",!0)])}),128))])])):P("",!0)])):P("",!0),a(c,{activeIndex:t.active,"onUpdate:activeIndex":e[6]||(e[6]=L=>t.active=L)},{default:w(()=>[a(m,{header:"Seleziona i biglietti",disabled:t.showOrderDetail},{default:w(()=>[a(s,{tickets:t.tickets,form:l.form,onNextTab:e[0]||(e[0]=L=>t.onNextTab(L)),onDisableSecondoTab:e[1]||(e[1]=L=>t.onDisableSecondoTab(L))},null,8,["tickets","form"])]),_:1},8,["disabled"]),a(m,{header:"Inserisci i dati",disabled:t.showSecondTab},{default:w(()=>[a(S,{onNextTab:e[2]||(e[2]=L=>t.onConfirmPayment(L)),location_permalink:l.form.location_permalink},null,8,["location_permalink"])]),_:1},8,["disabled"]),t.showOrderDetail?(d(),ee(m,{key:0,header:"Ordine completato"},{default:w(()=>{var L,f;return[n("div",Ya,[n("div",es,[z(" Ordine "),n("b",null,k(t.currentOrder.reservation_number),1),z(" registrato correttamente!"),ts]),t.currentOrder?(d(),y("div",os,[ns,n("div",ls,[(d(!0),y(re,null,Ae(t.tmp_tickets,r=>(d(),y("p",{class:"p-0 m-0 font-medium flex justify-content-between flex-1",key:r},[r&&r.quantity!=0?(d(),y("span",as,k(r.ticket_name),1)):P("",!0),r&&r.quantity!=0?(d(),y("span",ss," x "+k(r.quantity),1)):P("",!0),r.ticket_price?(d(),y("span",is," € "+k((+r.ticket_price).toFixed(2)),1)):P("",!0)]))),128))]),n("div",rs,[t.currentOrder.total?(d(),y("p",cs,[ds,n("span",us,[n("b",null,"€ "+k((+((L=t.currentOrder)==null?void 0:L.total)).toFixed(2)),1)])])):P("",!0)])])):P("",!0),n("div",ms,[a(_,{icon:"pi pi-envelope",class:"mr-3",rounted:"",outlined:"",label:"Invia biglietti",onClick:e[3]||(e[3]=r=>t.sendEmail()),disable:!((f=t.currentOrder)!=null&&f.user_email)},null,8,["disable"]),a(_,{icon:"pi pi-print",onClick:e[4]||(e[4]=r=>t.onPrintPDF()),class:"mr-3",rounted:"",outlined:"",label:"Stampa"}),a(_,{icon:"pi print-check-icon",onClick:e[5]||(e[5]=r=>t.printAndCheckIn()),class:"mr-3",rounted:"",outlined:"",label:"Stampa e Check-in"})])])]}),_:1})):P("",!0)]),_:1},8,["activeIndex"])],64)}const ps=le($a,[["render",fs]]),_s={props:["filters","date"],setup(o,e){oe(()=>{u.value=Et(8,24),l.value=Object.assign({},o.filters)});const l=C({}),t=it(),i=ne(),u=C(),s=C(!1),m=nt(),S=C(!1),_=M(()=>t.allCourses),c=M(()=>m.showNewOrderDialog),g=async function(){const r={location_permalink:o.filters.location_permalink,api_version:"v2"};await t.fetchAllCourses(r).catch(E=>{q(i,E)})},b=function(){m.setNewOrderDialogVisibility(!1),l.value.hour="",l.value.course=null,e.emit("onCloseDialog")},L=function(r){l.value.date=o.date,m.setNewOrderDialogVisibility(r)},f=function(){S.value=l.value.open_ticket};return ie(o.filters,()=>{if(g(),l.value=Object.assign({},o.filters),o.filters.course&&!o.filters.course.id){let r=_.value.find(E=>E.name===o.filters.course.name);r&&(l.value.course=r)}}),{courses:_,form:l,hours:u,disableForm:S,visible:s,onCloseDialog:b,updateDialog:L,onChecked:f,dialogVisible:c,dialogStore:m}},components:{NewOrderDialog:ps}},vs=n("h2",{class:"mt-1"},"Nuova prenotazione",-1),hs={class:"formgrid grid px-0 align-items-center mt-4"},ys={key:0,class:"field flex flex-column w-full col-12"},gs=n("label",{for:"typology"},"Scegli il percorso",-1),bs={key:1,class:"field flex flex-column w-full col-12"},ks=n("label",{for:"typology"},"Seleziona l'orario",-1),xs={class:"flex justify-content-end align-items-center mt-2"},ws={class:"flex align-items-center justify-content-between w-full"},Cs=n("h2",null,"Nuova prenotazione",-1);function Ss(o,e,l,t,i,u){const s=V("Dropdown"),m=V("Button"),S=V("NewOrderDialog"),_=V("Dialog"),c=V("Card");return d(),ee(c,{class:"mt-4"},{content:w(()=>[vs,n("div",hs,[l.filters.location_permalink?(d(),y("div",ys,[gs,a(s,{modelValue:t.form.course,"onUpdate:modelValue":e[0]||(e[0]=g=>t.form.course=g),options:t.courses,optionLabel:"name",disabled:t.disableForm,placeholder:""},null,8,["modelValue","options","disabled"])])):P("",!0),l.filters.location_permalink?(d(),y("div",bs,[ks,a(s,{modelValue:t.form.hour,"onUpdate:modelValue":e[1]||(e[1]=g=>t.form.hour=g),options:t.hours,disabled:t.disableForm,placeholder:""},null,8,["modelValue","options","disabled"])])):P("",!0)]),n("div",xs,[a(m,{label:"Prenota",disabled:!t.form.course||!t.form.hour,onClick:e[2]||(e[2]=g=>t.updateDialog(!0))},null,8,["disabled"])]),a(_,{visible:t.dialogVisible,"onUpdate:visible":e[5]||(e[5]=g=>t.dialogVisible=g),modal:"",header:"Nuova prenotazione",style:{width:"60rem"},breakpoints:{"1199px":"75vw","575px":"90vw"},closable:!1,onHide:e[6]||(e[6]=g=>t.onCloseDialog())},{header:w(()=>[n("div",ws,[Cs,a(m,{icon:"pi pi-times",text:"",rounded:"",onClick:e[3]||(e[3]=g=>t.updateDialog(!1))})])]),default:w(()=>[a(S,{form:t.form,onCloseDialog:e[4]||(e[4]=g=>t.onCloseDialog())},null,8,["form"])]),_:1},8,["visible"])]),_:1})}const Ds=le(_s,[["render",Ss]]),Os={props:["location_permalink"],setup(o,e){oe(()=>{t.value.start_date=se.local().startOf("day").toFormat("dd/MM/yyyy"),t.value.end_date=se.local().endOf("day").toFormat("dd/MM/yyyy"),t.value.created_at="false",t.value.start_hour="00:00",t.value.end_hour="23:59"});const l=ne(),t=C({}),i=ke(),{showLoader:u,hideLoader:s}=he(),m=function(){let c=Ke(t.value.start_date)+" "+t.value.start_hour,g=Ke(t.value.end_date)+" "+t.value.end_hour;const b={from:c,to:g,location_permalink:o.location_permalink,created_at:"false"};S(b)},S=async function(c){u(),await i.downloadReport(c).then(()=>{s(),e.emit("onSubmit")}).catch(g=>{s(),q(l,g)})};return{form:t,onSubmit:m,setDefaultIfBlank:function(){(!t.value.start_hour||t.value.start_hour=="")&&(t.value.start_hour="00:00"),(!t.value.end_hour||t.value.end_hour=="")&&(t.value.end_hour="23:59")}}},components:{Form:Ft}},Vs={class:"formgrid grid mt-3"},As={class:"field col-6 flex flex-column"},Ls=n("label",{from:"start_date"},"Dal",-1),Ts=n("label",{from:"start_hour",class:"mt-3"},"Dalle",-1),Ps={class:"field col-6 flex flex-column"},js=n("label",{from:"end_date"},"Al",-1),Ms=n("label",{from:"end_hour",class:"mt-3"},"Alle",-1),Ns={class:"flex align-items-center justify-content-end mt-6"};function Us(o,e,l,t,i,u){const s=V("Calendar"),m=V("InputMask"),S=V("Button"),_=V("Form");return d(),ee(_,{onSubmit:t.onSubmit},{default:w(()=>[n("div",Vs,[n("div",As,[Ls,a(s,{inputId:"start_date",modelValue:t.form.start_date,"onUpdate:modelValue":e[0]||(e[0]=c=>t.form.start_date=c),dateFormat:"dd/mm/yy",manualInput:!0},null,8,["modelValue"]),Ts,a(m,{id:"start_hour",modelValue:t.form.start_hour,"onUpdate:modelValue":e[1]||(e[1]=c=>t.form.start_hour=c),mask:"99:99",placeholder:"HH:mm",onBlur:e[2]||(e[2]=c=>t.setDefaultIfBlank())},null,8,["modelValue"])]),n("div",Ps,[js,a(s,{inputId:"end_date",modelValue:t.form.end_date,"onUpdate:modelValue":e[3]||(e[3]=c=>t.form.end_date=c),dateFormat:"dd/mm/yy",manualInput:!0},null,8,["modelValue"]),Ms,a(m,{id:"end_hour",modelValue:t.form.end_hour,"onUpdate:modelValue":e[4]||(e[4]=c=>t.form.end_hour=c),mask:"99:99",placeholder:"HH:mm",onBlur:e[5]||(e[5]=c=>t.setDefaultIfBlank())},null,8,["modelValue"])])]),n("div",Ns,[a(S,{label:"Annulla",text:"",onClick:e[6]||(e[6]=c=>o.$emit("onSubmit"))}),a(S,{label:"Scarica",type:"submit"})])]),_:1},8,["onSubmit"])}const Es=le(Os,[["render",Us]]),Fs={class:"flex justify-content-between align-items-center"},Is={class:"field flex flex-column mt-3"},Bs={class:"text-xl font-medium pl-3 py-0"},$s={key:0,style:{color:"#495057"},class:"flex flex-column align-items-end"},zs=n("i",{class:"pi pi-calendar mr-2 text-xl"},null,-1),Rs={class:"capitalize text-xl"},qs={class:"flex gap-4"},Hs={key:0,class:"col-3 mt-3"},Ks={class:"col-9 mt-3"},Xs=Fe({__name:"OrderView",setup(o){const e=C({}),l=C({}),t=C(),i=C(!1),u=ce(),s=ke(),m=ne(),S=nt(),_=M(()=>s.allLocations),c=M(()=>s.getCurrentLocation);oe(()=>{c.value&&(e.value.location=c.value,l.value.location_permalink=c.value.permalink),b().then(()=>{g()})});const g=async function(){var D;let v={};const h=((D=c==null?void 0:c.value)==null?void 0:D.permalink)??null;h?v.location_permalink=h:v.location_permalink=_.value[0].permalink,await u.fetchPaymentMethods(v).then(()=>{}).catch(U=>{q(m,U)})},b=async function(){await s.fetchAllLocations().then(()=>{c.value||(e.value.location=_.value[0],l.value.location_permalink=_.value[0].permalink,s.updateCurrenLocation(_.value[0]))}).catch(v=>{q(m,v)})},L=function(v){v.course?e.value.course={id:v.course}:e.value.course="",v.name?e.value.name=v.name:e.value.name="",v.group?e.value.group_name=v.group:e.value.group_name="",v.hour&&(v.hour.start_at?e.value.hour=v.hour.start_at:e.value.hour=v.hour),v.slot?e.value.time_range=v.slot:e.value.time_range=void 0},f=function(v){v.start_at&&(l.value.hour=v.start_at),v.course_name&&(l.value.course={name:v.course_name}),v.date&&(l.value.date=v.date),v.hour&&(l.value.hour=v.hour),v.max_seats?l.value.max_seats=v.max_seats:l.value.max_seats=null,S.setNewOrderDialogVisibility(!0)},r=function(){t.value.loadLazyData()},E=function(){i.value=!1};return(v,h)=>{var B,K;const D=V("Button"),U=V("Dialog");return d(),y("div",null,[n("div",Fs,[n("div",Is,[n("p",Bs,k((K=(B=e.value)==null?void 0:B.location)==null?void 0:K.name),1)]),e.value&&e.value.date?(d(),y("div",$s,[n("div",null,[zs,n("span",Rs,k(Ze(Ie)(e.value.date)),1)]),a(D,{label:"Report visite",link:"",class:"m-0 p-0",onClick:h[0]||(h[0]=F=>i.value=!0),icon:"pi pi-download"}),a(U,{visible:i.value,"onUpdate:visible":h[2]||(h[2]=F=>i.value=F),modal:"",header:"Report visite",style:{width:"35rem"}},{default:w(()=>[a(Es,{onOnSubmit:h[1]||(h[1]=F=>E()),location_permalink:e.value.location.permalink},null,8,["location_permalink"])]),_:1},8,["visible"])])):P("",!0)]),n("div",qs,[e.value.location?(d(),y("div",Hs,[a(ol,{filters:e.value},null,8,["filters"]),a(Ds,{date:e.value.date,filters:l.value,onOnCloseDialog:h[3]||(h[3]=F=>r())},null,8,["date","filters"])])):P("",!0),n("div",Ks,[a(vl,{filters:e.value,onOnSubmit:h[4]||(h[4]=F=>L(F))},null,8,["filters"]),e.value.date?(d(),ee(Xn,{key:0,filters:e.value,ref_key:"orderTable",ref:t,class:"mt-4",onUpdateFilters:h[5]||(h[5]=F=>f(F))},null,8,["filters"])):P("",!0)])])])}}});export{Xs as default};
